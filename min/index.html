<!DOCTYPE html>
<html lang="en"><head>
<meta charset="utf-8">
<title>Sir Brunoâ€™s Minnelied</title>
<meta name="viewport" content="width=device-width">
<style>
*{margin:0;padding:0}html{font-family:sans-serif}#info{position:absolute;top:0;left:0;right:0;background-color:rgba(255,255,255,0.75);cursor:pointer;padding:0.5em 2em;text-align:center}#canvas{display:block;margin:auto;image-rendering:-moz-crisp-edges;image-rendering:-webkit-optimize-contrast;image-rendering:crisp-edges}</style>
</head><body>
<canvas id="canvas" moz-opaque></canvas>
<div id="info"></div>
<script>
(function(){var q,g,u,r,E;q=function(){function d(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.webkitIsFullScreen}function b(){a&&a(d())}var a;document.addEventListener("fullscreenchange",b);document.addEventListener("webkitfullscreenchange",b);document.addEventListener("mozfullscreenchange",b);document.addEventListener("msfullscreenchange",b);document.addEventListener("fullscreenerror",b);document.addEventListener("webkitfullscreenerror",
b);document.addEventListener("mozfullscreenerror",b);document.addEventListener("msfullscreenerror",b);return{is:d,enter:function(){var a;if(!d())a=document.documentElement,a.requestFullscreen?a.requestFullscreen():a.webkitRequestFullscreen?a.webkitRequestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.msRequestFullscreen&&a.msRequestFullscreen()},exit:function(){d()&&(document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?
document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen())},setUpdateHandler:function(e){a=e}}}();g=function(){function d(b,a,e,c){this.width=b;this.height=a;this.interactionMode=e;c=c||{};Object.keys(c).forEach(function(a){this[a]=c[a]}.bind(this))}d.prototype.interact=function(b,a){switch(this.interactionMode){case "text":return this.text;case "take":return b.removeThing(this),a.addThing(this),"Taken: "+this.text;default:return this.interactionMode(b,a)}};d.prototype.draw=
function(b,a,e,c,f){var d;if(this.sprite&&(d=this.animate?this.sprite+Math.floor(c/500)%this.animate:this.sprite,b.drawImage(f[d],a,e+this.height-f[d].height),!this.pattern))return;b.translate(a,e);b.fillStyle=f[this.pattern];b.fillRect(0,0,this.width,this.sprite?this.height-f[d].height:this.height);b.translate(-a,-e)};d.prototype.drawInventory=function(b,a){b.drawImage(a[this.sprite+"Inv"],3,3)};d.prototype.drawPlayer=function(b,a,e,c,f){switch(this.sprite){case "helmet":b.drawImage(f.helmetPlayer,
a+9,e);break;case "sword":c||b.drawImage(f.swordPlayer,a+5,e+49)}};return d}();u=function(){function d(){this.inventory=[]}d.prototype.addThing=function(b){this.inventory.push(b)};d.prototype.hasThing=function(b){return this.inventory.indexOf(b)>-1};d.prototype.removeThing=function(b){var a;for(a=0;a<this.inventory.length;a++)if(this.inventory[a]===b){this.inventory.splice(a,1);break}};d.prototype.hasLight=function(){var b;for(b=0;b<this.inventory.length;b++)if(this.inventory[b].light)return!0};d.prototype.moveTo=
function(b,a,e,c){this.dest=b;this.interactThing=a;if(b<this.x)this.dir=!0;else if(b>this.x)this.dir=!1;if(e)this.x=b,this.dir=c};d.prototype.walk=function(b,a){var e=b*0.08;if(Math.abs(this.x-this.dest)<=e){if(this.x=this.dest,this.interactThing)return e=this.interactThing.interact(a,this),this.interactThing=null,e}else this.x<this.dest?this.x+=e:this.x-=e};d.prototype.draw=function(b,a,e,c){var f;this.dir&&(b.save(),b.translate(Math.round(this.x),0),b.scale(-1,1),b.translate(-Math.round(this.x),
0));f=Math.round(this.x-15);a=a-90-2;b.drawImage(this.x!==this.dest?Math.floor(e*0.08/30*2)%2?c.person0:c.person1:c.person0,f,a);for(e=0;e<this.inventory.length;e++)this.inventory[e].drawPlayer(b,f,a,this.dir,c);this.dir&&b.restore()};d.prototype.drawInventory=function(b,a,e){var c=this.inventory.length-a,f=[];c<0&&(c=0);for(a=c;a<this.inventory.length;a++)b.save(),b.translate((a-c)*30,0),this.inventory[a].drawInventory(b,e),f.push(this.inventory[a].text),b.restore();return f};return d}();r=function(){function d(b){this.width=
b;this.things=[];this.locations=[]}d.prototype.addLocation=function(b,a){this.locations.push([b,a])};d.prototype.getLocation=function(b){return this.locations[b]};d.prototype.addThing=function(b,a,e){this.things.push({t:b,x:a,y:e})};d.prototype.removeThing=function(b){var a;for(a=0;a<this.things.length;a++)if(this.things[a].t===b){this.things.splice(a,1);break}};d.prototype.findThing=function(b,a){var e,c;for(e=this.things.length-1;e>=0;e--)if(c=this.things[e],c.t.interactionMode&&c.x<=b&&b<=c.x+
c.t.width&&a<=c.y&&c.y-c.t.height<=a)return c;return null};d.prototype.getLimit=function(b,a,e){var c;a<e?a=e:a>this.width-e&&(a=this.width-e);for(c=0;c<this.things.length;c++)this.things[c].t.blocksPath&&(a=b<this.things[c].x?Math.min(a,this.things[c].x-e):Math.max(a,this.things[c].x+this.things[c].t.width+e));return a};d.prototype.draw=function(b,a,e,c,f){var d;b.fillStyle=f.bg;d=(e-10)%24;d!==0&&(d=24-d);b.translate(0,-d);b.fillRect(0,0,this.width,e-10+d);b.translate(0,d);b.fillStyle=f.floor;b.fillRect(0,
e-10,this.width,10);for(d=0;d<this.things.length;d++)this.things[d].t.draw(b,this.things[d].x,e-this.things[d].y,c,f);a.draw(b,e,c,f);if(this.light)a=a.hasLight()?[a.x,Math.round(72)]:this.light,b.translate(a[0],e-a[1]),b.fillStyle=f.shadow,b.fillRect(-a[0],a[1]-e,this.width,e)};return d}();E=function(){function d(a,e){this.canvas=a;this.info=e;this.hideInfo();this.ctx=a.getContext("2d",{alpha:!1});this.player=new u;this.calcSize();this.initEvents()}var b=window.requestAnimationFrame||window.mozRequestAnimationFrame;
d.prototype.loadSprites=function(a,e){var c=new Image,b;b=this.ctx.createRadialGradient(0,0,0,0,0,135);b.addColorStop(0,"transparent");b.addColorStop(1,"#000");this.sprites={shadow:b};c.onload=function(){Object.keys(a).forEach(function(e){var b=a[e],d=document.createElement("canvas"),f=d.getContext("2d");d.width=b[2];d.height=b[3];b[5]&&(f.scale(-1,1),f.translate(-b[2],0));f.drawImage(c,b[0],b[1],b[2],b[3],0,0,b[2],b[3]);this.sprites[e]=b[4]?this.ctx.createPattern(d,b[4]):d}.bind(this));e()}.bind(this);
c.src="data:image/png;base64,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"};
d.prototype.calcSize=function(){var a,e,b;a=Math.floor(Math.min(window.innerWidth/400,window.innerHeight/200,5));a<1&&(a=1);e=Math.floor(window.innerWidth/a);b=Math.min(Math.max(Math.floor(window.innerHeight/a),200),270);this.canvas.width=e;this.canvas.height=b;this.canvas.style.width=e*a+"px";this.canvas.style.height=b*a+"px";this.factor=a;this.buttonsX=e-52;this.inventoryY=this.inventoryX=this.buttonsY=10;this.inventoryCount=Math.floor((e-20-52)/30);this.inventoryDescs=[];this.roomX=10;this.roomY=
60;this.roomW=e-20;this.roomH=b-40-30};d.prototype.getCoordinates=function(a){return[(a.clientX-this.canvas.offsetLeft)/this.factor,(a.clientY-this.canvas.offsetTop)/this.factor]};d.prototype.getArea=function(a,b){if(a>=this.buttonsX&&b>=this.buttonsY&&b<=this.buttonsY+16)return(a-this.buttonsX)%26<=16?["buttons",Math.floor((a-this.buttonsX)/26)]:null;if(a>=this.inventoryX&&a<=this.inventoryX+30*this.inventoryCount&&b>=this.inventoryY&&b<=this.inventoryY+30)return["inventory",Math.floor((a-this.inventoryX)/
30)];if(a>=this.roomX&&a<=this.roomX+this.roomW&&b>=this.roomY&&b<=this.roomY+this.roomH)return["room"]};d.prototype.initEvents=function(){this.canvas.addEventListener("mousemove",function(a){a=this.getCoordinates(a);a=this.getArea(a[0],a[1]);switch(a&&a[0]){case "buttons":a=a[1]===0?this.soundOn?"Turn sound off":"Turn sound on":q.is()?"Exit fullscreen":"Enter fullscreen";this.setCursorTitle("pointer",a);break;case "inventory":a=this.inventoryDescs[a[1]];this.setCursorTitle("",a?"You have: "+a:"");
break;case "room":this.setCursorTitle("crosshair","");break;default:this.setCursorTitle("","")}}.bind(this));this.canvas.addEventListener("click",function(a){var b=this.getCoordinates(a),a=b[0],b=b[1],c=this.getArea(a,b);this.hideInfo();switch(c[0]){case "buttons":if(c[1]===0)this.soundOn=!this.soundOn;else q[q.is()?"exit":"enter"]();break;case "room":this.onRoomClick(a-this.roomX+this.roomStart,this.roomH+this.roomY-b)}}.bind(this));this.info.addEventListener("click",function(){this.hideInfo()}.bind(this));
window.addEventListener("resize",function(){this.calcSize()}.bind(this))};d.prototype.showInfo=function(a){this.info.textContent=a;this.info.style.display=""};d.prototype.hideInfo=function(){this.info.style.display="none"};d.prototype.setCursorTitle=function(a,b){this.canvas.style.cursor=a;this.canvas.title=b};d.prototype.setRoom=function(a,b){b=a.getLocation(b||0);this.room=a;this.player.moveTo(b[0],null,!0,b[1]);this.calcRoomStart(!0)};d.prototype.calcRoomStart=function(a){var b;this.room.width<=
this.roomW?b=-Math.floor((this.roomW-this.room.width)/2):(b=Math.floor(this.player.x/(this.roomW/2))*(this.roomW/2)-this.roomW/4,b<0?b=0:b+this.roomW>this.room.width&&(b=this.room.width-this.roomW));b=Math.round(b);a||Math.abs(this.roomStart-b)<=10?this.roomStart=b:this.roomStart+=b>this.roomStart?10:-10};d.prototype.startDraw=function(){this.isDrawing=!0;b(function(a){this.prevTime=this.startTime=a;this.onAnimationFrame(a)}.bind(this))};d.prototype.onAnimationFrame=function(a){var d;if(this.isDrawing)this.draw(a),
(d=this.player.walk(a-this.prevTime,this.room))&&this.showInfo(d),this.calcRoomStart(),this.prevTime=a,b(this.onAnimationFrame.bind(this))};d.prototype.stopDraw=function(){this.isDrawing=!1};d.prototype.fadeIn=function(a){this.isFading=!0;this.fadeStart=-1;this.fadeDir=1;this.fadeCallback=a};d.prototype.fadeOut=function(a){this.isFading=!0;this.fadeDir=this.fadeStart=-1;this.fadeCallback=a};d.prototype.draw=function(a){this.ctx.fillStyle="#000";this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height);
this.drawButtons();this.drawInventory();this.drawRoom(a);if(this.isFading){if(this.fadeStart===-1)this.fadeStart=a;a-this.fadeStart>=200?(this.isFading=!1,this.fadeCallback()):(a=(a-this.fadeStart)/200,this.fadeDir===1&&(a=1-a),this.ctx.fillStyle="rgba(0,0,0,"+a+")",this.ctx.fillRect(this.roomX,this.roomY,this.roomW,this.roomH))}};d.prototype.drawButtons=function(){this.ctx.drawImage(this.sprites[this.soundOn?"soundOn":"soundOff"],this.buttonsX,this.buttonsY);this.ctx.drawImage(this.sprites[q.is()?
"exitFullscreen":"enterFullscreen"],this.buttonsX+26,this.buttonsY)};d.prototype.drawInventory=function(){this.ctx.save();this.ctx.translate(this.inventoryX,this.inventoryY);this.ctx.fillStyle="#ddd";this.ctx.fillRect(0,0,30*this.inventoryCount,30);this.inventoryDescs=this.player.drawInventory(this.ctx,this.inventoryCount,this.sprites);this.ctx.restore()};d.prototype.drawRoom=function(a){this.ctx.save();this.ctx.beginPath();this.ctx.rect(this.roomX,this.roomY,this.roomW,this.roomH);this.ctx.clip();
this.ctx.translate(this.roomX-this.roomStart,this.roomY);this.room.draw(this.ctx,this.player,this.roomH,a,this.sprites);this.ctx.restore()};d.prototype.onRoomClick=function(a,b){var c,d;this.isDrawing&&!this.isFading&&((c=this.room.findThing(a,b))&&this.player.x+22.5>=c.x&&this.player.x-22.5<=c.x+c.t.width?((d=c.t.interact(this.room,this.player))&&this.showInfo(d),c.t.alwaysWalk&&this.player.moveTo(this.room.getLimit(this.player.x,a,15))):(a=this.room.getLimit(this.player.x,a,15),this.player.moveTo(a,
c&&a+22.5>=c.x&&a-22.5<=c.x+c.t.width&&c.t)))};return d}();(function(){function d(a,c){b.fadeOut(function(){b.setRoom(a,c);b.fadeIn(function(){})})}var b=new E(document.getElementById("canvas"),document.getElementById("info")),a,e,c,f,j,t,m,q,y,n,z,A,B,C,D,w,h,o,s,l,i,v,p,u,k,F,x;q=new g(16,12,"take",{text:"A key",sprite:"key"});y=new g(16,12,"take",{text:"A second key",sprite:"key"});n=new g(12,40,"take",{text:"A torch",sprite:"torch",animate:2,light:!0});z=new g(16,16,"take",{text:"Your helmet",
sprite:"helmet"});A=new g(24,24,"take",{text:"Your sword",sprite:"sword"});B=new g(24,24,"take",{text:"Your shield",sprite:"shield"});C=new g(24,7,"take",{text:"The scroll with your Minnelied",sprite:"scroll"});D=new g(16,9,"take",{text:"A herring",sprite:"herring"});w=new g(16,10,"take",{text:"A bone with some meat",sprite:"bone"});h=new g(30,5,"",{pattern:"wood"});o=new g(25,50,"",{sprite:"window"});s=new g(4,4,"",{sprite:"doorKnob"});l=new g(24,195,function(){d(c,2);return"You climb up the ladder."},
{pattern:"ladder"});i=new g(22,195,function(a,b){if(this.state)return"The door is open.";return b.hasThing(q)?(this.state=!0,this.blocksPath=!1,this.pattern="door1",this.width=52,"You unlock the door with the key."):"The door is locked."},{pattern:"door0",alwaysWalk:!0,blocksPath:!0});a=new r(680);a.light=[200,95];a.addLocation(150);a.addLocation(512,!0);a.addThing(q,5,20);a.addThing(n,200,115);a.addThing(i,300,200);a.addThing(l,500,200);a.addThing(B,650,34);n=new g(18,199,function(){d(c);return"You go upstairs."},
{sprite:"stairsUpLeftBottom",pattern:"stairsUpLeft"});e=new r(500);e.light=[9,200];e.addLocation(33);e.addThing(n,0,199);e.addThing(h,50,75);e.addThing(h,150,75);e.addThing(h,250,75);e.addThing(h,350,75);e.addThing(h,450,75);e.addThing(D,57,84);e.addThing(A,253,97);e.addThing(w,457,85);n=new g(20,200,function(){d(e);return"You go downstairs."},{sprite:"stairsDownLeftBottom",pattern:"stairsDownLeft"});l=new g(48,120,function(a,b){return b.hasThing(y)?(d(f),"You unlock the door with the second key and enter the room."):
"The door is locked and your key does not fit."},{pattern:"wood",alwaysWalk:!0});i=new g(24,21,function(){d(a,1);return"You climb down the ladder."},{sprite:"ladderTop"});v=new g(18,199,function(){d(j,1);return"You go upstairs."},{sprite:"stairsUpRightBottom",pattern:"stairsUpRight"});p=new g(12,40,"",{sprite:"torch",animate:2});u=new g(80,5,"",{pattern:"wood"});k=new g(12,14,"",{sprite:"flame",animate:2});F=new g(100,60,"",{pattern:"stone"});c=new r(680);c.addLocation(35);c.addLocation(270);c.addLocation(512,
!0);c.addLocation(647,!0);c.addThing(n,0,200);c.addThing(p,50,115);c.addThing(F,90,70);c.addThing(u,100,19);c.addThing(k,100,30);c.addThing(k,105,35);c.addThing(k,110,32);c.addThing(k,116,38);c.addThing(k,121,29);c.addThing(k,124,45);c.addThing(k,127,36);c.addThing(k,130,31);c.addThing(k,135,38);c.addThing(k,137,44);c.addThing(k,140,30);c.addThing(k,146,36);c.addThing(k,149,45);c.addThing(k,150,32);c.addThing(k,155,39);c.addThing(k,161,29);c.addThing(k,167,35);c.addThing(k,170,31);c.addThing(l,246,
130);c.addThing(s,285,75);c.addThing(p,330,115);c.addThing(p,400,115);c.addThing(p,470,115);c.addThing(i,499,21);c.addThing(p,540,115);c.addThing(p,610,115);c.addThing(v,662,199);n=new g(48,120,function(){d(c,1);return"You leave the armory."},{pattern:"wood"});i=new g(16,16,"text",{text:"This is not your helmet, so you leave it there.",sprite:"helmet"});l=new g(24,24,"text",{text:"This is not your sword, so you leave it there.",sprite:"sword"});f=new r(440);f.light=[220,200];f.addLocation(220);f.addThing(h,
20,65);f.addThing(i,20,81);f.addThing(C,25,72);f.addThing(h,20,100);f.addThing(i,35,116);f.addThing(l,20,122);f.addThing(h,70,65);f.addThing(l,70,87);f.addThing(i,85,81);f.addThing(h,70,100);f.addThing(i,70,116);f.addThing(i,85,116);f.addThing(h,120,65);f.addThing(i,120,81);f.addThing(i,135,81);f.addThing(h,120,100);f.addThing(l,120,122);f.addThing(i,135,116);f.addThing(n,196,130);f.addThing(s,235,75);f.addThing(h,290,65);f.addThing(i,290,81);f.addThing(i,305,81);f.addThing(h,290,100);f.addThing(i,
305,116);f.addThing(l,290,122);f.addThing(h,340,65);f.addThing(l,340,87);f.addThing(i,355,81);f.addThing(h,340,100);f.addThing(i,340,116);f.addThing(i,355,116);f.addThing(h,390,65);f.addThing(i,390,81);f.addThing(i,405,81);f.addThing(h,390,100);f.addThing(l,390,122);f.addThing(i,405,116);h=new g(18,199,function(){d(m,1);return"You go upstairs."},{sprite:"stairsUpLeftBottom",pattern:"stairsUpLeft"});s=new g(20,199,function(){d(c,3);return"You go downstairs."},{sprite:"stairsDownRightBottom",pattern:"stairsDownRight"});
n=new g(45,45,function(){if(this.state)return this.state=!1,this.width=45,"You put the tapestry back.";this.state=!0;this.width=5;return"You find a hiding place behind the tapestry!"},{pattern:"tapestry"});l=new g(45,45,"text",{pattern:"tapestry",text:"This is a nice tapestry, but there is nothing special about this one."});v=new g(41,4,"",{pattern:"stone"});p=new g(4,41,"",{pattern:"stone"});i=new g(33,33,"",{pattern:"wood"});j=new r(700);j.addLocation(35);j.addLocation(667,!0);j.addThing(h,0,199);
j.addThing(o,50,130);j.addThing(l,118,130);j.addThing(o,205,130);j.addThing(l,273,130);j.addThing(o,350,130);j.addThing(i,424,124);j.addThing(z,428,106);j.addThing(v,420,128);j.addThing(v,420,91);j.addThing(p,420,128);j.addThing(p,457,128);j.addThing(n,418,130);j.addThing(o,495,130);j.addThing(l,563,130);j.addThing(o,640,130);j.addThing(s,680,199);h=new g(24,195,function(){d(m);return"You climb up the ladder."},{pattern:"ladder"});t=new r(200);t.addLocation(32);t.addThing(h,20,200);t.addThing(o,120,
130);t.addThing(y,170,20);h=new g(24,21,function(){d(t);return"You climb down the ladder."},{sprite:"ladderTop"});s=new g(20,199,function(){d(j);return"You go downstairs."},{sprite:"stairsDownRightBottom",pattern:"stairsDownRight"});x=new g(30,16,function(a,b){var c="The dog looks small but vicious and won\u2019t let you pass.";if(this.state)return"The dog is eating and ignores you.";if(b.hasThing(w))return this.state=!0,this.blocksPath=!1,this.height=12,this.sprite="dog1",a.removeThing(x),a.addThing(x,
150,17),b.removeThing(w),"You throw the bone to the dog, and it starts eating.";b.hasThing(D)&&(c+=" (The dog doesn\u2019t like fish.)");return c},{sprite:"dog0",blocksPath:!0,alwaysWalk:!0});n=new g(24,90,function(a,b){return!b.hasThing(A)?"I don\u2019t believe you are a knight if you don\u2019t carry a sword!":!b.hasThing(B)?"I don\u2019t believe you are a knight if you don\u2019t carry a shield!":!b.hasThing(z)?"I don\u2019t believe you are a knight if you don\u2019t wear a helmet!":!b.hasThing(C)?
"You look to nervous to sing your Minnelied without the scroll with your notes to remember it!":"You win!"},{sprite:"lady",blocksPath:!0});m=new r(560);m.addLocation(32);m.addLocation(360);m.addThing(h,19,21);m.addThing(o,50,130);m.addThing(x,150,21);m.addThing(o,170,130);m.addThing(s,350,199);m.addThing(o,290,130);m.addThing(n,500,95);m.addThing(o,410,130);m.addThing(o,530,130);b.setRoom(a);b.loadSprites({bg:[0,0,24,24,"repeat"],floor:[71,33,7,3,"repeat"],wood:[48,12,7,3,"repeat"],stone:[55,12,7,
3,"repeat"],person0:[0,24,30,90],person1:[0,114,30,90],keyInv:[24,0,24,24],key:[48,0,16,12],window:[30,24,25,50],torch0:[30,74,12,40],torch1:[42,74,12,40],torchInv:[54,142,24,24],flame0:[30,74,12,14],flame1:[42,74,12,14],helmetInv:[64,0,24,24],helmetPlayer:[48,15,12,9],helmet:[55,24,16,16],swordInv:[64,40,24,24],swordPlayer:[55,40,10,22],sword:[64,40,24,24],shieldInv:[64,64,24,24],shield:[64,64,24,24],tapestry:[71,24,9,9,"repeat"],ladder:[64,88,24,16,"repeat"],ladderTop:[63,88,26,26],enterFullscreen:[88,
0,16,16],exitFullscreen:[88,16,16,16],soundOn:[88,32,16,16],soundOff:[88,48,16,16],lady:[30,114,24,90],dog0:[54,114,30,16],dog1:[54,130,30,12],scroll:[54,190,24,7],scrollInv:[54,166,24,24],herring:[88,64,16,9],herringInv:[78,142,24,24],bone:[88,73,16,10],boneInv:[78,161,24,24],stairsUpRightBottom:[78,193,18,11],stairsUpRight:[78,185,18,8,"repeat"],stairsUpLeftBottom:[78,193,18,11,"",!0],stairsUpLeft:[78,185,18,8,"repeat",!0],stairsDownRightBottom:[84,131,20,11],stairsDownRight:[84,123,20,8,"repeat"],
stairsDownLeftBottom:[84,131,20,11,"",!0],stairsDownLeft:[84,123,20,8,"repeat",!0],door0:[54,197,10,5,"repeat"],door1:[64,197,10,5,"repeat"],doorKnob:[88,83,4,4]},function(){b.startDraw()})})()})();
</script>
</body></html>